package org.example.cooking_recipe_bot.utils;

import org.example.cooking_recipe_bot.db.entity.Recipe;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class RecipeParserTest {

    @Test
    void parseRecipeFromString() {

        String recipeString = "–ß–µ—á–µ–≤–∏—á–Ω—ã–µ –æ–ª–∞–¥—å–∏\n" +
                "‚Ä¢ –ü–æ–ª —Å—Ç–∞–∫–∞–Ω–∞ –∫–æ–ª–æ—Ç–æ–π —á–µ—á–µ–≤–∏—Ü—ã (–∑–∞–º–æ—á–∏—Ç—å –Ω–∞ –Ω–æ—á—å –∏–ª–∏ —á–∞—Å–∞ –Ω–∞ 3 (—Å–º —Ñ–æ—Ç–æ)\n" +
                "‚Ä¢ 1 –∫—Ä–∞—Å–Ω—ã–π –ø–µ—Ä–µ—Ü\n" +
                "‚Ä¢ –õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π\n" +
                "‚Ä¢ –ü—É—á–æ–∫ –ª—é–±–æ–π –∑–µ–ª–µ–Ω–∏\n" +
                "‚Ä¢ 1 —è–π—Ü–æ\n" +
                "‚Ä¢ –°–æ–ª—å/–ø–µ—Ä–µ—Ü/—á–µ—Å–Ω–æ–∫ —á–µ—Ä–µ–∑ —á–µ—Å–Ω–æ–∫–æ–¥–∞–≤–∫—É\n" +
                "–ß–µ—á–µ–≤–∏—Ü—É –ø—Ä–æ–º—ã—Ç—å, –ª—É–∫ –∏ –º–æ—Ä–∫–æ–≤—å –ø–æ—Ä–µ–∑–∞—Ç—å –∏ –±—ã—Å—Ç—Ä–æ –æ–±–∂–∞—Ä–∏—Ç—å, —Å–æ–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ –∫—Ä–æ–º–µ —è–π—Ü–∞ –∏ –∏–∑–º–µ–ª—å—á–∏—Ç—å –≤ –±–ª–µ–Ω–¥–µ—Ä–µ –¥–æ –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ–π –º–∞—Å—Å—ã, –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤–æ–¥—ã (~50–º–ª). " +
                "–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü–∏—è —Å–º–µ—Ç–∞–Ω—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å. –í–º–µ—à–∞—Ç—å —è–π—Ü–æ –∏ –∂–∞—Ä–∏—Ç—å –Ω–∞ –∞–ø —Å–∫–æ–≤–æ—Ä–æ–¥–∫–µ (—è –ø–µ—Ä–≤—É—é –ø–∞—Ä—Ç–∏—é –Ω–∞ –º–∞—Å–ª–µ –≥—Ö–∏, –ø–æ—Ç–æ–º –±–µ–∑). –û–≥–æ–Ω—å —Å–ª–∞–±—ã–π, –ø–æ ~3 –º–∏–Ω—É—Ç—ã —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã.\n" +
                "–° –≥—Ä–µ—á–µ—Å–∫–∏–º –π–æ–≥—É—Ä—Ç–æ–º+ —Å–æ–µ–≤—ã–π –ø—Ä–æ—Å—Ç–æ —É–º –æ—Ç—ä–µ—Å—Ç—å ‚ù§Ô∏è‚Äçüî•\n" +
                "#20–º–∏–Ω—É—Ç #—É–∂–∏–Ω #–æ–±–µ–¥ #–ø–ø";


        Recipe recipe = RecipeParser.parseRecipeFromString(recipeString);


        assertEquals("–ß–µ—á–µ–≤–∏—á–Ω—ã–µ –æ–ª–∞–¥—å–∏", recipe.getName());

        assertEquals("–ü–æ–ª —Å—Ç–∞–∫–∞–Ω–∞ –∫–æ–ª–æ—Ç–æ–π —á–µ—á–µ–≤–∏—Ü—ã (–∑–∞–º–æ—á–∏—Ç—å –Ω–∞ –Ω–æ—á—å –∏–ª–∏ —á–∞—Å–∞ –Ω–∞ 3 (—Å–º —Ñ–æ—Ç–æ)\n" +
                "1 –∫—Ä–∞—Å–Ω—ã–π –ø–µ—Ä–µ—Ü\n" +
                "–õ—É–∫ —Ä–µ–ø—á–∞—Ç—ã–π\n" +
                "–ü—É—á–æ–∫ –ª—é–±–æ–π –∑–µ–ª–µ–Ω–∏\n" +
                "1 —è–π—Ü–æ\n" +
                "–°–æ–ª—å/–ø–µ—Ä–µ—Ü/—á–µ—Å–Ω–æ–∫ —á–µ—Ä–µ–∑ —á–µ—Å–Ω–æ–∫–æ–¥–∞–≤–∫—É", recipe.getIngredients());

        assertEquals("–ß–µ—á–µ–≤–∏—Ü—É –ø—Ä–æ–º—ã—Ç—å, –ª—É–∫ –∏ –º–æ—Ä–∫–æ–≤—å –ø–æ—Ä–µ–∑–∞—Ç—å –∏ –±—ã—Å—Ç—Ä–æ –æ–±–∂–∞—Ä–∏—Ç—å, —Å–æ–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ –∫—Ä–æ–º–µ —è–π—Ü–∞ –∏ –∏–∑–º–µ–ª—å—á–∏—Ç—å –≤ –±–ª–µ–Ω–¥–µ—Ä–µ –¥–æ –æ–¥–Ω–æ—Ä–æ–¥–Ω–æ–π –º–∞—Å—Å—ã, –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤–æ–¥—ã (~50–º–ª). " +
                "–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü–∏—è —Å–º–µ—Ç–∞–Ω—ã –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å. –í–º–µ—à–∞—Ç—å —è–π—Ü–æ –∏ –∂–∞—Ä–∏—Ç—å –Ω–∞ –∞–ø —Å–∫–æ–≤–æ—Ä–æ–¥–∫–µ (—è –ø–µ—Ä–≤—É—é –ø–∞—Ä—Ç–∏—é –Ω–∞ –º–∞—Å–ª–µ –≥—Ö–∏, –ø–æ—Ç–æ–º –±–µ–∑). –û–≥–æ–Ω—å —Å–ª–∞–±—ã–π, –ø–æ ~3 –º–∏–Ω—É—Ç—ã —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã.\n" +
                "–° –≥—Ä–µ—á–µ—Å–∫–∏–º –π–æ–≥—É—Ä—Ç–æ–º+ —Å–æ–µ–≤—ã–π –ø—Ä–æ—Å—Ç–æ —É–º –æ—Ç—ä–µ—Å—Ç—å ‚ù§Ô∏è‚Äçüî•", recipe.getInstructions());

        assertEquals("20–º–∏–Ω—É—Ç\n" +
                "—É–∂–∏–Ω\n" +
                "–æ–±–µ–¥\n" +
                "–ø–ø", recipe.getHashtags());
    }
}